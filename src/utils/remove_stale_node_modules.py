import os
from datetime import datetime, timedelta
import shutil

# Set the root directory to start the search from
root_dir = "C:/Users/Alex/lambda/JSX/"

# Set the maximum age for a node_modules directory (3 months in this example)
max_age = timedelta(days=150)

# Iterate through the directories and files in the root directory
for root, dirs, files in os.walk(root_dir):
    print(root)
    # Check if the current directory is a node_modules directory
    if any(
        directory in root
        for directory in ["node_modules", ".cache", ".next", ".git\\logs"]
    ):
        # Get the modification time of the node_modules directory
        mod_time = datetime.fromtimestamp(os.path.getmtime(root))
        # Calculate the age of the node_modules directory
        age = datetime.now() - mod_time
        # If the age of the node_modules directory is greater than the maximum age, delete it
        if age > max_age:
            print(f"Deleting {root}")
            shutil.rmtree(root)
        else:
            print(f"LIVE: {root}")
